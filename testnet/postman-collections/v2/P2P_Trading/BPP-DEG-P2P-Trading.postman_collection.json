{
    "info": {
        "_postman_id": "bpp-deg-p2p-trading-collection",
        "name": "BPP-DEG:P2P-Trading",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "description": "Postman collection for BPP (Buyer Provider Platform) implementing P2P Energy Trading APIs based on Beckn Protocol v2"
    },
    "item": [
        {
            "name": "on_discover",
            "item": [
                {
                    "name": "on_discover-solar-catalog",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_discover\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"catalogs\": [\n      {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n        \"@type\": \"beckn:Catalog\",\n        \"beckn:id\": \"catalog-energy-001\",\n        \"beckn:descriptor\": {\n          \"@type\": \"beckn:Descriptor\",\n          \"schema:name\": \"Solar Energy Trading Catalog\"\n        },\n        \"beckn:items\": [\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Item\",\n            \"beckn:id\": \"energy-resource-solar-001\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Solar Energy - 30.5 kWh\",\n              \"beckn:shortDesc\": \"Carbon Offset Certified Solar Energy\",\n              \"beckn:longDesc\": \"High-quality solar energy from verified source with carbon offset certification\"\n            },\n            \"beckn:provider\": {\n              \"@type\": \"beckn:Provider\",\n              \"beckn:id\": \"provider-solar-farm-001\"\n            },\n            \"beckn:itemAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyResource/v0.2/context.jsonld\",\n              \"@type\": \"EnergyResource\",\n              \"sourceType\": \"SOLAR\",\n              \"deliveryMode\": \"GRID_INJECTION\",\n              \"certificationStatus\": \"Carbon Offset Certified\",\n              \"meterId\": \"100200300\",\n              \"inverterId\": \"inv-12345\",\n              \"availableQuantity\": 30.5,\n              \"productionWindow\": {\n                \"start\": \"2024-10-04T10:00:00Z\",\n                \"end\": \"2024-10-04T18:00:00Z\"\n              },\n              \"sourceVerification\": {\n                \"verified\": true,\n                \"verificationDate\": \"2024-09-01T00:00:00Z\",\n                \"certificates\": [\n                  \"https://example.com/certs/solar-panel-cert.pdf\"\n                ]\n              },\n              \"productionAsynchronous\": true\n            }\n          }\n        ],\n        \"beckn:offers\": [\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Offer\",\n            \"beckn:id\": \"offer-energy-001\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Daily Settlement Solar Energy Offer\"\n            },\n            \"beckn:provider\": \"provider-solar-farm-001\",\n            \"beckn:items\": [\"energy-resource-solar-001\"],\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 0.15,\n              \"schema:priceCurrency\": \"USD\",\n              \"schema:unitText\": \"kWh\"\n            },\n            \"beckn:offerAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeOffer/v0.2/context.jsonld\",\n              \"@type\": \"EnergyTradeOffer\",\n              \"pricingModel\": \"PER_KWH\",\n              \"settlementType\": \"DAILY\",\n              \"wheelingCharges\": {\n                \"amount\": 2.5,\n                \"currency\": \"USD\",\n                \"description\": \"PG&E Grid Services wheeling charge\"\n              },\n              \"minimumQuantity\": 1.0,\n              \"maximumQuantity\": 100.0,\n              \"validityWindow\": {\n                \"start\": \"2024-10-04T00:00:00Z\",\n                \"end\": \"2024-10-04T23:59:59Z\"\n              }\n            }\n          }\n        ]\n      }\n    ]\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_discover",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_discover"
                            ]
                        },
                        "description": "Response to discover request with catalog containing energy resources and offers."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "on_select",
            "item": [
                {
                    "name": "on_select-energy-quote",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_select\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-energy-001\",\n      \"beckn:items\": [\n        {\n          \"beckn:id\": \"energy-resource-solar-001\",\n          \"quantity\": {\n            \"count\": 10.0,\n            \"unit\": \"kWh\"\n          }\n        }\n      ],\n      \"beckn:offers\": [\n        {\n          \"beckn:id\": \"offer-energy-001\"\n        }\n      ],\n      \"beckn:provider\": {\n        \"beckn:id\": \"provider-solar-farm-001\"\n      },\n      \"beckn:quote\": {\n        \"@type\": \"beckn:Quotation\",\n        \"beckn:price\": {\n          \"@type\": \"schema:PriceSpecification\",\n          \"schema:price\": 1.5,\n          \"schema:priceCurrency\": \"USD\",\n          \"schema:unitText\": \"kWh\"\n        },\n        \"beckn:breakup\": [\n          {\n            \"@type\": \"beckn:Breakup\",\n            \"beckn:title\": \"Energy Cost (10 kWh @ $0.15/kWh)\",\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 1.5,\n              \"schema:priceCurrency\": \"USD\"\n            }\n          },\n          {\n            \"@type\": \"beckn:Breakup\",\n            \"beckn:title\": \"Wheeling Charges\",\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 2.5,\n              \"schema:priceCurrency\": \"USD\"\n            }\n          }\n        ]\n      }\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_select",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_select"
                            ]
                        },
                        "description": "Response to select request with priced quote including energy cost and wheeling charges breakdown."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "on_init",
            "item": [
                {
                    "name": "on_init-energy-order",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_init\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-energy-001\",\n      \"beckn:items\": [\n        {\n          \"beckn:id\": \"energy-resource-solar-001\",\n          \"quantity\": {\n            \"count\": 10.0,\n            \"unit\": \"kWh\"\n          }\n        }\n      ],\n      \"beckn:offers\": [\n        {\n          \"beckn:id\": \"offer-energy-001\"\n        }\n      ],\n      \"beckn:provider\": {\n        \"beckn:id\": \"provider-solar-farm-001\"\n      },\n      \"beckn:fulfillments\": [\n        {\n          \"@type\": \"beckn:Fulfillment\",\n          \"beckn:id\": \"fulfillment-energy-001\",\n          \"beckn:type\": \"ENERGY_DELIVERY\",\n          \"beckn:stops\": [\n            {\n              \"@type\": \"beckn:Stop\",\n              \"beckn:id\": \"stop-start-001\",\n              \"beckn:type\": \"START\",\n              \"beckn:location\": {\n                \"@type\": \"beckn:Location\",\n                \"beckn:address\": \"100200300\"\n              }\n            },\n            {\n              \"@type\": \"beckn:Stop\",\n              \"beckn:id\": \"stop-end-001\",\n              \"beckn:type\": \"END\",\n              \"beckn:location\": {\n                \"@type\": \"beckn:Location\",\n                \"beckn:address\": \"98765456\"\n              }\n            }\n          ]\n        }\n      ],\n      \"beckn:payments\": [\n        {\n          \"@type\": \"beckn:Payment\",\n          \"beckn:id\": \"payment-energy-001\",\n          \"beckn:type\": \"ON-FULFILLMENT\",\n          \"beckn:status\": \"NOT-PAID\",\n          \"beckn:collected_by\": \"BPP\"\n        }\n      ],\n      \"beckn:orderAttributes\": {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeContract/v0.2/context.jsonld\",\n        \"@type\": \"EnergyTradeContract\",\n        \"contractStatus\": \"PENDING\",\n        \"sourceMeterId\": \"100200300\",\n        \"targetMeterId\": \"98765456\",\n        \"inverterId\": \"inv-12345\",\n        \"contractedQuantity\": 10.0,\n        \"tradeStartTime\": \"2024-10-04T10:00:00Z\",\n        \"tradeEndTime\": \"2024-10-04T18:00:00Z\",\n        \"sourceType\": \"SOLAR\",\n        \"certification\": {\n          \"status\": \"Carbon Offset Certified\",\n          \"certificates\": [\n            \"https://example.com/certs/solar-panel-cert.pdf\"\n          ]\n        }\n      }\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_init",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_init"
                            ]
                        },
                        "description": "Response to init request with initialized order and EnergyTradeContract with PENDING status."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "on_confirm",
            "item": [
                {
                    "name": "on_confirm-energy-order",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_confirm\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-energy-001\",\n      \"beckn:items\": [\n        {\n          \"beckn:id\": \"energy-resource-solar-001\",\n          \"quantity\": {\n            \"count\": 10.0,\n            \"unit\": \"kWh\"\n          }\n        }\n      ],\n      \"beckn:offers\": [\n        {\n          \"beckn:id\": \"offer-energy-001\"\n        }\n      ],\n      \"beckn:provider\": {\n        \"beckn:id\": \"provider-solar-farm-001\"\n      },\n      \"beckn:fulfillments\": [\n        {\n          \"@type\": \"beckn:Fulfillment\",\n          \"beckn:id\": \"fulfillment-energy-001\",\n          \"beckn:type\": \"ENERGY_DELIVERY\",\n          \"beckn:state\": {\n            \"@type\": \"beckn:State\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"PENDING\"\n            }\n          }\n        }\n      ],\n      \"beckn:payments\": [\n        {\n          \"@type\": \"beckn:Payment\",\n          \"beckn:id\": \"payment-energy-001\",\n          \"beckn:type\": \"ON-FULFILLMENT\",\n          \"beckn:status\": \"NOT-PAID\",\n          \"beckn:collected_by\": \"BPP\"\n        }\n      ],\n      \"beckn:orderAttributes\": {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeContract/v0.2/context.jsonld\",\n        \"@type\": \"EnergyTradeContract\",\n        \"contractStatus\": \"ACTIVE\",\n        \"sourceMeterId\": \"100200300\",\n        \"targetMeterId\": \"98765456\",\n        \"inverterId\": \"inv-12345\",\n        \"contractedQuantity\": 10.0,\n        \"tradeStartTime\": \"2024-10-04T10:00:00Z\",\n        \"tradeEndTime\": \"2024-10-04T18:00:00Z\",\n        \"sourceType\": \"SOLAR\",\n        \"certification\": {\n          \"status\": \"Carbon Offset Certified\",\n          \"certificates\": [\n            \"https://example.com/certs/solar-panel-cert.pdf\"\n          ]\n        },\n        \"settlementCycles\": [\n          {\n            \"cycleId\": \"settle-2024-10-04-001\",\n            \"startTime\": \"2024-10-04T00:00:00Z\",\n            \"endTime\": \"2024-10-04T23:59:59Z\",\n            \"status\": \"PENDING\",\n            \"amount\": 0.0,\n            \"currency\": \"USD\"\n          }\n        ]\n      }\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_confirm",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_confirm"
                            ]
                        },
                        "description": "Response to confirm request with activated contract (ACTIVE status) and initialized settlement cycle."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "on_status",
            "item": [
                {
                    "name": "on_status-energy-delivery-in-progress",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_status\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-energy-001\",\n      \"beckn:items\": [\n        {\n          \"beckn:id\": \"energy-resource-solar-001\",\n          \"quantity\": {\n            \"count\": 10.0,\n            \"unit\": \"kWh\"\n          }\n        }\n      ],\n      \"beckn:offers\": [\n        {\n          \"beckn:id\": \"offer-energy-001\"\n        }\n      ],\n      \"beckn:provider\": {\n        \"beckn:id\": \"provider-solar-farm-001\"\n      },\n      \"beckn:fulfillments\": [\n        {\n          \"@type\": \"beckn:Fulfillment\",\n          \"beckn:id\": \"fulfillment-energy-001\",\n          \"beckn:type\": \"ENERGY_DELIVERY\",\n          \"beckn:state\": {\n            \"@type\": \"beckn:State\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"IN_PROGRESS\"\n            }\n          },\n          \"beckn:attributes\": {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeDelivery/v0.2/context.jsonld\",\n            \"@type\": \"EnergyTradeDelivery\",\n            \"deliveryStatus\": \"IN_PROGRESS\",\n            \"deliveryMode\": \"GRID_INJECTION\",\n            \"deliveredQuantity\": 9.8,\n            \"deliveryStartTime\": \"2024-10-04T10:00:00Z\",\n            \"deliveryEndTime\": null,\n            \"meterReadings\": [\n              {\n                \"timestamp\": \"2024-10-04T10:00:00Z\",\n                \"sourceReading\": 1000.0,\n                \"targetReading\": 990.0,\n                \"energyFlow\": 10.0\n              },\n              {\n                \"timestamp\": \"2024-10-04T12:00:00Z\",\n                \"sourceReading\": 1000.5,\n                \"targetReading\": 990.3,\n                \"energyFlow\": 10.2\n              },\n              {\n                \"timestamp\": \"2024-10-04T14:00:00Z\",\n                \"sourceReading\": 1001.0,\n                \"targetReading\": 990.8,\n                \"energyFlow\": 10.2\n              }\n            ],\n            \"telemetry\": [\n              {\n                \"eventTime\": \"2024-10-04T12:00:00Z\",\n                \"metrics\": [\n                  {\n                    \"name\": \"ENERGY\",\n                    \"value\": 5.8,\n                    \"unitCode\": \"KWH\"\n                  },\n                  {\n                    \"name\": \"POWER\",\n                    \"value\": 2.5,\n                    \"unitCode\": \"KW\"\n                  },\n                  {\n                    \"name\": \"VOLTAGE\",\n                    \"value\": 240.0,\n                    \"unitCode\": \"VLT\"\n                  }\n                ]\n              }\n            ],\n            \"settlementCycleId\": \"settle-2024-10-04-001\",\n            \"lastUpdated\": \"2024-10-04T15:30:00Z\"\n          }\n        }\n      ],\n      \"beckn:payments\": [\n        {\n          \"@type\": \"beckn:Payment\",\n          \"beckn:id\": \"payment-energy-001\",\n          \"beckn:type\": \"ON-FULFILLMENT\",\n          \"beckn:status\": \"NOT-PAID\",\n          \"beckn:collected_by\": \"BPP\"\n        }\n      ],\n      \"beckn:orderAttributes\": {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeContract/v0.2/context.jsonld\",\n        \"@type\": \"EnergyTradeContract\",\n        \"contractStatus\": \"ACTIVE\",\n        \"sourceMeterId\": \"100200300\",\n        \"targetMeterId\": \"98765456\",\n        \"inverterId\": \"inv-12345\",\n        \"contractedQuantity\": 10.0,\n        \"tradeStartTime\": \"2024-10-04T10:00:00Z\",\n        \"tradeEndTime\": \"2024-10-04T18:00:00Z\",\n        \"sourceType\": \"SOLAR\",\n        \"certification\": {\n          \"status\": \"Carbon Offset Certified\",\n          \"certificates\": [\n            \"https://example.com/certs/solar-panel-cert.pdf\"\n          ]\n        },\n        \"settlementCycles\": [\n          {\n            \"cycleId\": \"settle-2024-10-04-001\",\n            \"startTime\": \"2024-10-04T00:00:00Z\",\n            \"endTime\": \"2024-10-04T23:59:59Z\",\n            \"status\": \"PENDING\",\n            \"amount\": 0.0,\n            \"currency\": \"USD\"\n          }\n        ],\n        \"lastUpdated\": \"2024-10-04T15:30:00Z\"\n      }\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_status",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_status"
                            ]
                        },
                        "description": "Response to status request during delivery with IN_PROGRESS status, meter readings, and telemetry data."
                    },
                    "response": []
                },
                {
                    "name": "on_status-energy-delivery-completed",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_status\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-energy-001\",\n      \"beckn:items\": [\n        {\n          \"beckn:id\": \"energy-resource-solar-001\",\n          \"quantity\": {\n            \"count\": 10.0,\n            \"unit\": \"kWh\"\n          }\n        }\n      ],\n      \"beckn:offers\": [\n        {\n          \"beckn:id\": \"offer-energy-001\"\n        }\n      ],\n      \"beckn:provider\": {\n        \"beckn:id\": \"provider-solar-farm-001\"\n      },\n      \"beckn:fulfillments\": [\n        {\n          \"@type\": \"beckn:Fulfillment\",\n          \"beckn:id\": \"fulfillment-energy-001\",\n          \"beckn:type\": \"ENERGY_DELIVERY\",\n          \"beckn:state\": {\n            \"@type\": \"beckn:State\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"COMPLETED\"\n            }\n          },\n          \"beckn:attributes\": {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeDelivery/v0.2/context.jsonld\",\n            \"@type\": \"EnergyTradeDelivery\",\n            \"deliveryStatus\": \"COMPLETED\",\n            \"deliveryMode\": \"GRID_INJECTION\",\n            \"deliveredQuantity\": 10.0,\n            \"deliveryStartTime\": \"2024-10-04T10:00:00Z\",\n            \"deliveryEndTime\": \"2024-10-04T18:00:00Z\",\n            \"meterReadings\": [\n              {\n                \"timestamp\": \"2024-10-04T10:00:00Z\",\n                \"sourceReading\": 1000.0,\n                \"targetReading\": 990.0,\n                \"energyFlow\": 0.0\n              },\n              {\n                \"timestamp\": \"2024-10-04T12:00:00Z\",\n                \"sourceReading\": 1000.5,\n                \"targetReading\": 990.3,\n                \"energyFlow\": 0.3\n              },\n              {\n                \"timestamp\": \"2024-10-04T14:00:00Z\",\n                \"sourceReading\": 1001.0,\n                \"targetReading\": 990.8,\n                \"energyFlow\": 0.5\n              },\n              {\n                \"timestamp\": \"2024-10-04T16:00:00Z\",\n                \"sourceReading\": 1002.0,\n                \"targetReading\": 991.5,\n                \"energyFlow\": 0.7\n              },\n              {\n                \"timestamp\": \"2024-10-04T18:00:00Z\",\n                \"sourceReading\": 1010.0,\n                \"targetReading\": 1000.0,\n                \"energyFlow\": 10.0\n              }\n            ],\n            \"telemetry\": [\n              {\n                \"eventTime\": \"2024-10-04T18:00:00Z\",\n                \"metrics\": [\n                  {\n                    \"name\": \"ENERGY\",\n                    \"value\": 10.0,\n                    \"unitCode\": \"KWH\"\n                  },\n                  {\n                    \"name\": \"POWER\",\n                    \"value\": 0.0,\n                    \"unitCode\": \"KW\"\n                  },\n                  {\n                    \"name\": \"VOLTAGE\",\n                    \"value\": 240.0,\n                    \"unitCode\": \"VLT\"\n                  }\n                ]\n              }\n            ],\n            \"settlementCycleId\": \"settle-2024-10-04-001\",\n            \"lastUpdated\": \"2024-10-04T18:30:00Z\"\n          }\n        }\n      ],\n      \"beckn:payments\": [\n        {\n          \"@type\": \"beckn:Payment\",\n          \"beckn:id\": \"payment-energy-001\",\n          \"beckn:type\": \"ON-FULFILLMENT\",\n          \"beckn:status\": \"NOT-PAID\",\n          \"beckn:collected_by\": \"BPP\"\n        }\n      ],\n      \"beckn:orderAttributes\": {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeContract/v0.2/context.jsonld\",\n        \"@type\": \"EnergyTradeContract\",\n        \"contractStatus\": \"COMPLETED\",\n        \"sourceMeterId\": \"100200300\",\n        \"targetMeterId\": \"98765456\",\n        \"inverterId\": \"inv-12345\",\n        \"contractedQuantity\": 10.0,\n        \"tradeStartTime\": \"2024-10-04T10:00:00Z\",\n        \"tradeEndTime\": \"2024-10-04T18:00:00Z\",\n        \"sourceType\": \"SOLAR\",\n        \"certification\": {\n          \"status\": \"Carbon Offset Certified\",\n          \"certificates\": [\n            \"https://example.com/certs/solar-panel-cert.pdf\"\n          ]\n        },\n        \"settlementCycles\": [\n          {\n            \"cycleId\": \"settle-2024-10-04-001\",\n            \"startTime\": \"2024-10-04T00:00:00Z\",\n            \"endTime\": \"2024-10-04T23:59:59Z\",\n            \"status\": \"SETTLED\",\n            \"amount\": 4.0,\n            \"currency\": \"USD\",\n            \"breakdown\": {\n              \"energyCost\": 1.5,\n              \"wheelingCharges\": 2.5\n            }\n          }\n        ],\n        \"lastUpdated\": \"2024-10-04T18:30:00Z\"\n      }\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_status",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_status"
                            ]
                        },
                        "description": "Response to status request after delivery completion with COMPLETED status, final meter readings, and SETTLED settlement cycle."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "cascaded-on_init",
            "item": [
                {
                    "name": "cascaded-on_init-utility",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"on_init\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{cascaded_transaction_id}}\",\n    \"bap_id\": \"{{cascaded_bap_id}}\",\n    \"bap_uri\": \"{{cascaded_bap_uri}}\",\n    \"bpp_id\": \"{{cascaded_bpp_id}}\",\n    \"bpp_uri\": \"{{cascaded_bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"order\": {\n      \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n      \"@type\": \"beckn:Order\",\n      \"beckn:id\": \"order-cascaded-utility-001\",\n      \"beckn:provider\": {\n        \"@type\": \"beckn:Provider\",\n        \"beckn:id\": \"provider-uppcl-001\",\n        \"beckn:descriptor\": {\n          \"@type\": \"beckn:Descriptor\",\n          \"schema:name\": \"UPPCL\"\n        }\n      },\n      \"beckn:fulfillments\": [\n        {\n          \"@type\": \"beckn:Fulfillment\",\n          \"beckn:id\": \"fulfillment-utility-registration-001\",\n          \"beckn:type\": \"ENERGY_DELIVERY\",\n          \"beckn:customer\": {\n            \"@type\": \"beckn:Customer\",\n            \"beckn:person\": {\n              \"@type\": \"schema:Person\",\n              \"schema:name\": \"Raj\"\n            },\n            \"beckn:contact\": {\n              \"@type\": \"schema:ContactPoint\",\n              \"schema:telephone\": \"+91-1276522222\"\n            }\n          },\n          \"beckn:stops\": [\n            {\n              \"@type\": \"beckn:Stop\",\n              \"beckn:id\": \"stop-source-utility-001\",\n              \"beckn:type\": \"START\",\n              \"beckn:location\": {\n                \"@type\": \"beckn:Location\",\n                \"beckn:address\": \"92982739\"\n              }\n            },\n            {\n              \"@type\": \"beckn:Stop\",\n              \"beckn:id\": \"stop-target-utility-001\",\n              \"beckn:type\": \"END\",\n              \"beckn:location\": {\n                \"@type\": \"beckn:Location\",\n                \"beckn:address\": \"98765456\"\n              }\n            }\n          ]\n        }\n      ],\n      \"beckn:quote\": {\n        \"@type\": \"beckn:Quotation\",\n        \"beckn:price\": {\n          \"@type\": \"schema:PriceSpecification\",\n          \"schema:price\": 2.5,\n          \"schema:priceCurrency\": \"INR\"\n        },\n        \"beckn:breakup\": [\n          {\n            \"@type\": \"beckn:Breakup\",\n            \"beckn:title\": \"Wheeling Charge\",\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 2.5,\n              \"schema:priceCurrency\": \"INR\"\n            }\n          }\n        ]\n      },\n      \"beckn:orderAttributes\": {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyTradeContract/v0.2/context.jsonld\",\n        \"@type\": \"EnergyTradeContract\",\n        \"contractStatus\": \"PENDING\",\n        \"sourceMeterId\": \"92982739\",\n        \"targetMeterId\": \"98765456\",\n        \"contractedQuantity\": 10.0,\n        \"tradeStartTime\": \"2024-10-04T10:00:00Z\",\n        \"tradeEndTime\": \"2024-10-04T18:00:00Z\",\n        \"sourceType\": \"SOLAR\"\n      },\n      \"beckn:billing\": {\n        \"@type\": \"beckn:Billing\",\n        \"beckn:name\": \"p2p-Trading-BPP\",\n        \"beckn:email\": \"p2ptbpp@example.com\",\n        \"beckn:phone\": \"+91-1276522222\"\n      },\n      \"beckn:cancellationTerms\": [\n        {\n          \"@type\": \"beckn:CancellationTerm\",\n          \"beckn:externalRef\": {\n            \"@type\": \"schema:MediaObject\",\n            \"schema:encodingFormat\": \"text/html\",\n            \"schema:contentUrl\": \"https://mvvnl.in/cancellation_terms.html\"\n          }\n        }\n      ]\n    }\n  }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{bpp_adapter_url}}/on_init",
                            "host": [
                                "{{bpp_adapter_url}}"
                            ],
                            "path": [
                                "on_init"
                            ]
                        },
                        "description": "Response from Utility Company (Transmission BPP) to cascaded init request with wheeling charges quote."
                    },
                    "response": []
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Pure JS pre-request script to replace moment()",
                    "",
                    "// 1) ISO 8601 timestamp without needing moment",
                    "const isoTimestamp = new Date().toISOString();",
                    "pm.collectionVariables.set('iso_date', isoTimestamp);"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "domain",
            "value": "energy-trade"
        },
        {
            "key": "version",
            "value": "2.0.0"
        },
        {
            "key": "bap_id",
            "value": "bap.energy-consumer.com"
        },
        {
            "key": "bap_uri",
            "value": "https://bap.energy-consumer.com"
        },
        {
            "key": "bpp_id",
            "value": "bpp.energy-provider.com"
        },
        {
            "key": "bpp_uri",
            "value": "https://bpp.energy-provider.com"
        },
        {
            "key": "bpp_adapter_url",
            "value": "http://localhost:3002/api/webhook/trigger"
        },
        {
            "key": "transaction_id",
            "value": "txn-energy-001"
        },
        {
            "key": "cascaded_transaction_id",
            "value": "txn-cascaded-energy-001"
        },
        {
            "key": "cascaded_bap_id",
            "value": "p2pTrading-bpp.com"
        },
        {
            "key": "cascaded_bap_uri",
            "value": "https://api.p2pTrading-bpp.com/pilot/bap/energy/v2"
        },
        {
            "key": "cascaded_bpp_id",
            "value": "example-transmission-bpp.com"
        },
        {
            "key": "cascaded_bpp_uri",
            "value": "https://api.example-transmission-bpp.com/pilot/bpp/"
        },
        {
            "key": "iso_date",
            "value": ""
        }
    ]
}
